plugins {
    id 'java'
    id 'org.springframework.boot' version '3.3.1'
    id 'io.spring.dependency-management' version '1.1.5'
    id 'org.hibernate.orm' version '6.5.2.Final'
    id "org.openjfx.javafxplugin" version "0.1.0"
    id "application"
}

group = 'com.wedasoft'
version = '0.0.4-SNAPSHOT'

repositories {
    mavenCentral()
    //    mavenLocal()
}

ext {
//    junitVersion = '5.10.0'
//    assertjVersion = '3.24.2'
//    hibernateVersion = '6.2.7.Final'
//    hibernateJpaModelGenVersion = "${hibernateVersion}"
//    h2databaseVersion = '2.2.220'
    javaFxVersion = "17.0.10"
    javaVersion = 17
}

dependencies {
    // Spring boot starters
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-webflux'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'io.projectreactor:reactor-test'
    testRuntimeOnly 'org.junit.platform:junit-platform-launcher'

    // Database
    implementation 'com.h2database:h2'

    // Lombok
    compileOnly 'org.projectlombok:lombok'
    annotationProcessor 'org.projectlombok:lombok'

    // JavaFX
    implementation "org.openjfx:javafx-controls:${javaFxVersion}"
    implementation "org.openjfx:javafx-fxml:${javaFxVersion}"
    implementation "org.openjfx:javafx-base:${javaFxVersion}"
    implementation "org.openjfx:javafx-graphics:${javaFxVersion}"
}

application {
    mainClass = 'com.wedasoft.JavaFxSpringBootGradleApp.JfxSpringBootAppLauncher'
}

javafx {
    version = "${javaFxVersion}"
}

//tasks.withType(JavaCompile) {
//    options.encoding = 'UTF-8'
//    options.release = Integer.parseInt("${jdkCompileVersion}")
//}

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

java {
    withJavadocJar()
    withSourcesJar()
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

javadoc {
    if (JavaVersion.current().isJava9Compatible()) {
        options.addBooleanOption('html5', true)
    }
}

hibernate {
    enhancement {
        enableAssociationManagement = true
    }
}

tasks.named('test') {
    useJUnitPlatform()
}
